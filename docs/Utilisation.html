
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Utilisation &#8212; Documentation Abeille 09.04.2024</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/translations.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="Utilisation avancée" href="UtilisationAvancee.html" />
    <link rel="prev" title="Installation" href="Installation.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/Abeille_icon.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="Installation.html" title="Chapitre précédent">Installation</a></li>
      <li>Next: <a href="UtilisationAvancee.html" title="Chapitre suivant">Utilisation avancée</a></li>
  </ul></li>
</ul>
</div><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Presentation.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="devices/Equipements.html">Equipements supportés</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Utilisation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#la-page-de-configuration-d-abeille">La page de configuration d’Abeille</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dependances">Dépendances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-de-la-zigate">Configuration de la zigate</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#la-page-de-gestion-des-equipements">La page de gestion des équipements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#groupes">Groupes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#remplacement-d-equipements">Remplacement d’équipements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#migration-d-equipements">Migration d’équipements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#la-page-de-detail-d-un-equipement">La page de détail d’un équipement</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mode-avance-pour-une-zigate">Mode “Avancé” pour une Zigate</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mise-a-jour-over-the-air">Mise-à-jour « Over The Air »</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#acces-a-l-assistant-de-mise-a-jour">Accès à l’assistant de mise-à-jour</a></li>
<li class="toctree-l3"><a class="reference internal" href="#un-peu-de-detail">Un peu de détail</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#inclusion">Inclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#suppression">Suppression</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sante">Santé</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tuto">Tuto</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trucs-et-astuces">Trucs et Astuces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="UtilisationAvancee.html">Utilisation avancée</a></li>
<li class="toctree-l1"><a class="reference internal" href="AjoutNouvelEquipement.html">Ajout d’un nouvel équipement</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Questions fréquentes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Divers.html">Divers</a></li>
<li class="toctree-l1"><a class="reference internal" href="DIY.html">Do It Yourself</a></li>
<li class="toctree-l1"><a class="reference internal" href="Debug.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="Developpement.html">Developpement</a></li>
<li class="toctree-l1"><a class="reference internal" href="Changelog.html">ChangeLog</a></li>
</ul>


        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="utilisation">
<h1>Utilisation<a class="headerlink" href="#utilisation" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="la-page-de-configuration-d-abeille">
<h2>La page de configuration d’Abeille<a class="headerlink" href="#la-page-de-configuration-d-abeille" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="dependances">
<h3>Dépendances<a class="headerlink" href="#dependances" title="Lien permanent vers ce titre">¶</a></h3>
<p>2 éléments sont potentiellement requis en fonction du type de zigate que vous utilisez:</p>
<ul class="simple">
<li><p>le package WiringPI est requis si une des zigates est du type « PI »</p></li>
<li><p>le package “socat” est requis si une des zigates du type « WIFI »</p></li>
</ul>
<img alt="_images/ConfigPage-Dependencies.png" src="_images/ConfigPage-Dependencies.png" />
</div>
<div class="section" id="configuration-de-la-zigate">
<h3>Configuration de la zigate<a class="headerlink" href="#configuration-de-la-zigate" title="Lien permanent vers ce titre">¶</a></h3>
<p>L’exemple ci apres montre la configuration d’une zigate du type « PI », connectée sur le port « ttyS1 » et activée.</p>
<img alt="_images/ConfigPage-Zigate1.png" src="_images/ConfigPage-Zigate1.png" />
<p>Les éléments a remplir sont les suivants</p>
<ul class="simple">
<li><p>Le type de zigate: « PI », « USB », « DIN » ou « WIFI » et la version correspondante</p></li>
<li><p>Si type USB/PI ou DIN, le port utilisé</p></li>
<li><p>Si type WIFI, l’adresse IP et le port de la zigate</p></li>
</ul>
<p>Une fois ces éléments connus, il est possible de faire un test de communication (sauf version WIFI pour l’instant) via le bouton « Tester ».
Si le test est bon, « OK » en vert apparaitra. Sinon le log « AbeilleConfig.log » doit donner + de précisions quant au problème rencontré.</p>
<img alt="_images/ConfigPage-Zigate1-2.png" src="_images/ConfigPage-Zigate1-2.png" />
<p>Une fois le test OK, il ne vous reste qu’a activer la zigate, sauvegarder, et redémarrer Abeille</p>
<img alt="_images/ConfigPage-Zigate1-Activate.png" src="_images/ConfigPage-Zigate1-Activate.png" />
<p>puis</p>
<img alt="_images/ConfigPage-Zigate1-Save.png" src="_images/ConfigPage-Zigate1-Save.png" />
<p>et enfin</p>
<img alt="_images/ConfigPage-Zigate1-Restart.png" src="_images/ConfigPage-Zigate1-Restart.png" />
</div>
</div>
<div class="section" id="la-page-de-gestion-des-equipements">
<h2>La page de gestion des équipements<a class="headerlink" href="#la-page-de-gestion-des-equipements" title="Lien permanent vers ce titre">¶</a></h2>
<p>On accède à cette page via différents moyens:</p>
<ul class="simple">
<li><p>Le menu Plugins &gt; Protocole domotique &gt; Abeille</p></li>
<li><p>Depuis la page de config via le bouton “Ouvrir” de la zone “Etat”</p></li>
</ul>
<p>Cette page liste tous les équipements gérés par Abeille et déja inclus dans Jeedom.</p>
<div class="section" id="groupes">
<h3>Groupes<a class="headerlink" href="#groupes" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les équipements peuvent être adressés de deux façons:</p>
<ul class="simple">
<li><p>Directement via leur adresse Zigbee courte qui leur est attribuée lors de l’inclusion</p></li>
<li><p>Ou via une adresse de « groupe » permettant de joindre un ensembles d’équipements en même temps si ILS SUPPORTENT CETTE FONCTIONALITE</p></li>
</ul>
<p>Les adresses de groupe sont typiquement utilisées pas les télécommandes Zigbee: Hue, Ikea,…</p>
<p>L’intérêt est qu’un seul message sera envoyé sur le réseau Zigbee, répété par tous les routeurs et tous les équipements ayant cette adresse de groupe réagiront donnant une impression d’exécution simultanée.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Astuce: Ça peut aussi vous sortir d’une situation ou la couverture radio n’est pas bonne et ou vous avez du mal à joindre un équipement. Si vous l’adressez avec son adresse courte, le message doit être routé jusqu’à sa destination par une route spécifique qui peut être interrompu par une muvaise liaison radio. Si vous l’adressez avec une adresse de groupe, le message va être répété par tous les routeurs et vous augmentez la chance que l’équipement reçoive l’information.</p>
</div>
<p>Vous pouvez aussi utiliser un scénario dans Jeedom pour adresser un groupe d’équipements, en envoyant à chacun d’eux une commande. Cette solution ne permet pas d’avoir l’impression d’instantanéité mais est très flexible si vous avez un mix de produit zwave et Zigbee par exemple.</p>
<p>Les équipements supportant l’adressage par groupe sont listés dans la section « Groupes »</p>
<img alt="_images/Groupes-Example.png" src="_images/Groupes-Example.png" />
<p>Raffraichir ou supprimer un/tous les Groupes</p>
<img alt="_images/Groupes-Refresh.png" src="_images/Groupes-Refresh.png" />
<p>Le bouton “1” permet de raffraichir tous les groupes pour l’équipement correspondant.
Le bouton “2” quant à lui permet de supprimer tous les groupes.
Le bouton “3” enfin permet de ne supprimer qu’un seul groupe.</p>
</div>
<div class="section" id="remplacement-d-equipements">
<h3>Remplacement d’équipements<a class="headerlink" href="#remplacement-d-equipements" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce chapitre peut vous interesser si vous souhaitez conserver l’historique d’un équipement qui ne répond plus ou que vous souhaitez remplacer.</p>
<p>L’idée est la suivante:</p>
<ul class="simple">
<li><p>Vous procédez à l’inclusion du nouvel équipement du MEME TYPE que celui à remplacer</p></li>
<li><p>Puis via la partie “remplacement”, selectionnez le vieil équipement</p></li>
<li><p>Selectionnez le nouvel équipement</p></li>
<li><p>Et cliquez sur “Remplacer”.</p></li>
</ul>
<img alt="_images/RemplacementEq.png" src="_images/RemplacementEq.png" />
</div>
<div class="section" id="migration-d-equipements">
<h3>Migration d’équipements<a class="headerlink" href="#migration-d-equipements" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si vous avez plusieurs Zigates et souhaitez basculer un équipement de l’une à l’autre, c’est le chapitre qu’il vous faut.</p>
<p>Globalement dans tout réseau Zigbee, la procédure est</p>
<ul class="simple">
<li><p>d’exclure proprement l’équipement de son réseau initial</p></li>
<li><p>puis de le réintégrer dans le nouveau réseau</p></li>
</ul>
<p>dans les 2 cas, lors de l’inclusion dans le nouveau réseau, Abeille devrait reconnaitre l’équipement (graçe à son adresse IEEE) et faire la mise à jour nécessaire pour qu’il n’y ai aucun doublon.</p>
<p>Dans la pratique, la partie suivante est une aide à cette migration bien qu’elle puisse ne pas fonctionner dans tous les cas. En particulier les équipements plus vieux que Zigbee 3.0 peuvent être “capricieux”.</p>
<img alt="_images/EqMigration-1.png" src="_images/EqMigration-1.png" />
<p>Une fois l’équipement et la zigate de destination choisis, la séquence sera la suivante</p>
<ul>
<li><p>La Zigate destination passe en mode “inclusion”.</p></li>
<li><p>Demande à l’équipement de quitter le réseau.</p>
<p>Si l’équipement est sur <strong>piles</strong>, vous devez le <strong>reveiller</strong> dans la foulée. C’est probablement le + compliqué.
Une fois sorti du réseau, il devrait se remettre à la recherche d’un nouvau réseau avec qui s’associer.</p>
</li>
</ul>
<p>Dans tous les cas si cette procédure ne fonctionne pas, le plus simple revient à</p>
<ul class="simple">
<li><p>Mettre la Zigate destination en mode inclusion.</p></li>
<li><p>Puis forcer un reset sur l’équipement pour qu’il fasse une nouvelle association.</p></li>
</ul>
</div>
</div>
<div class="section" id="la-page-de-detail-d-un-equipement">
<h2>La page de détail d’un équipement<a class="headerlink" href="#la-page-de-detail-d-un-equipement" title="Lien permanent vers ce titre">¶</a></h2>
<p>On y arrive simplement en cliquant sur l’équipement en question.</p>
<div class="section" id="mode-avance-pour-une-zigate">
<h3>Mode “Avancé” pour une Zigate<a class="headerlink" href="#mode-avance-pour-une-zigate" title="Lien permanent vers ce titre">¶</a></h3>
<p>En cliquant sur une Zigate, puis sur l’onglet “Avancé”, le menu suivant est affiché:</p>
<img alt="_images/PageEQAvance-Zigate.png" src="_images/PageEQAvance-Zigate.png" />
<p>Choix du canal ZigBee</p>
<p>Par défaut le canal est choisi par la Zigate elle-même en fonction de l’occupation des fréquences (mode « auto »).</p>
<p>Le canal choisi est affiché et il est possible de « forcer » un canal de son choix.</p>
<img alt="_images/Zigate-ZigbeeChannel.png" src="_images/Zigate-ZigbeeChannel.png" />
</div>
</div>
<div class="section" id="mise-a-jour-over-the-air">
<h2>Mise-à-jour « Over The Air »<a class="headerlink" href="#mise-a-jour-over-the-air" title="Lien permanent vers ce titre">¶</a></h2>
<p>Certains équipements supportent la mise-à-jour de leur firmware à travers le réseau (Over The Air).</p>
<p>Abeille permet d’effectuer cette mise-à-jour dés lors que vous avez récupéré le bon firmware auprès du fabricant.</p>
<div class="section" id="acces-a-l-assistant-de-mise-a-jour">
<h3>Accès à l’assistant de mise-à-jour<a class="headerlink" href="#acces-a-l-assistant-de-mise-a-jour" title="Lien permanent vers ce titre">¶</a></h3>
<p>Via la page des équipements (Plugins &gt; Protocole domotique &gt; Abeille)</p>
<img alt="_images/OTA-Acces.png" src="_images/OTA-Acces.png" />
<p>En cliquant sur le bouton ci-dessus, l’assistant de mise-à-jour apparait comme l’exemple suivant:</p>
<img alt="_images/OTA-Assistant.png" src="_images/OTA-Assistant.png" />
<p>Le bouton AJOUTER permet de charger un firmware sur la boxe Zigbee.</p>
<p>Les formats supportés sont « .ota » ou « .ota.signed ».</p>
<p>A partir du moment ou un firmware est disponible, vous pouvez notifier l’équipement correspondant pour lui demander de lancer la mise-à-jour. N’oubliez pas que si cet équipement est sur batteries, il faut le reveiller tout de suite apres l’applui sur le bouton « NOTIFIER.</p>
</div>
<div class="section" id="un-peu-de-detail">
<h3>Un peu de détail<a class="headerlink" href="#un-peu-de-detail" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour les curieux, le sequencement des étapes de mise-à-jour est le suivant:</p>
<ul class="simple">
<li><p>Optionnel: L’équipement peut être “notifié” qu’un firmware est disponible pour lui</p></li>
<li><p>L’équipement demande si un FW est disponible</p></li>
<li><p>La zigate répond oui « il y en a un, telle version », ou « non »</p></li>
<li><p>L’équipement demande l’envoi du firmware par petits « blocks »</p></li>
<li><p>Le plugin renvoi les bouts de demandés. Cette étape peut prendre un long moment (autour d’1H pour un firmware Ikea par ex)</p></li>
<li><p>Une fois le transfert terminé, l’équipement vérifie l’integrité et fait sa mise à jour si tout est monde ou remonte une erreur</p></li>
</ul>
</div>
</div>
<div class="section" id="inclusion">
<h2>Inclusion<a class="headerlink" href="#inclusion" title="Lien permanent vers ce titre">¶</a></h2>
<p>La première étape pour pouvoir utiliser un équipement est de l” <a class="reference internal" href="Inclusion.html"><span class="doc">Inclusion</span></a> dans le réseau zigbee géré par la zigate. Il n’existe pas de méthode universelle car chaque fabriquant est libre de procéder de la façon qu’il souhaite. Le grand principe est de mettre la zigate en mode <a class="reference internal" href="Inclusion.html"><span class="doc">Inclusion</span></a> et de faire des manipulations sur l’équipement pour qu’il s” <a class="reference internal" href="Inclusion.html"><span class="doc">Inclusion</span></a> et rejoigne le réseau.</p>
</div>
<div class="section" id="suppression">
<h2>Suppression<a class="headerlink" href="#suppression" title="Lien permanent vers ce titre">¶</a></h2>
<p>Vous avez la possibilité de faire une <a class="reference internal" href="Suppression.html"><span class="doc">Suppression</span></a> d’un équipement du réseau zigbee géré par la zigate.</p>
</div>
<div class="section" id="sante">
<h2>Santé<a class="headerlink" href="#sante" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le réseau est constitué de nombreux équipements qui vivent au rythme et aléa du réseau radio, des coupures de courant, etc. Afin de monitorer le réseau Abeille propose plusieurs outils: <a class="reference internal" href="Health.html"><span class="doc">Santé</span></a></p>
</div>
<div class="section" id="tuto">
<h2>Tuto<a class="headerlink" href="#tuto" title="Lien permanent vers ce titre">¶</a></h2>
<p>Dans la mesure ou Abeille à pour objectif d’exploité le réseau, je vous propose quelques <a class="reference internal" href="Tuto.html"><span class="doc">Tuto</span></a> permettant de mettre en application et répondre à vos besoins.</p>
</div>
<div class="section" id="trucs-et-astuces">
<h2>Trucs et Astuces<a class="headerlink" href="#trucs-et-astuces" title="Lien permanent vers ce titre">¶</a></h2>
<p>D’autres fonctions de Jeedom sont bien pratiques, par exemple si vous devez <a class="reference internal" href="Remplacement.html"><span class="doc">Fonctions Jeedom</span></a> remplacer des équipements par d’autres, ou <a class="reference internal" href="Remplacement.html"><span class="doc">Fonctions Jeedom</span></a> des commandes par d’autres.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>

    <div class="footer">
      &copy;2019-24, KiwiHC16/Tcharp38.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>